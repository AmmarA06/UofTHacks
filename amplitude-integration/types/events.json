{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Amplitude Event Catalog",
  "description": "Centralized event catalog for ShelfSense Amplitude integration. Ensures consistency across frontend and backend.",
  "version": "1.0.0",
  "events": {
    "PRODUCT_VIEWED": {
      "description": "User viewed a product page",
      "category": "ecommerce",
      "properties": {
        "product_id": {
          "type": "string",
          "required": true,
          "description": "Unique product identifier"
        },
        "product_name": {
          "type": "string",
          "required": true,
          "description": "Human-readable product name"
        },
        "product_category": {
          "type": "string",
          "required": true,
          "description": "Product category"
        },
        "price": {
          "type": "number",
          "required": true,
          "description": "Current product price"
        },
        "sku": {
          "type": "string",
          "required": false,
          "description": "Product SKU code"
        }
      }
    },
    "PRODUCT_WINDOW_SHOPPED": {
      "description": "User viewed product but showed low engagement - triggers 30% discount",
      "category": "ecommerce",
      "ai_trigger": true,
      "instructions": "This item has low shelf velocity. Calculate a 30% clearance discount using the product's current price property, update the product's displayed price to the discounted value, and add a 30% discount tag for that product_name.",
      "properties": {
        "product_id": {
          "type": "string",
          "required": true
        },
        "product_name": {
          "type": "string",
          "required": true
        },
        "product_category": {
          "type": "string",
          "required": true
        },
        "price": {
          "type": "number",
          "required": true
        },
        "instructions": {
          "type": "string",
          "required": false,
          "description": "Instructions for AI agent"
        }
      }
    },
    "PRODUCT_CART_ABANDONED": {
      "description": "User added to cart but didn't purchase - triggers urgency messaging",
      "category": "ecommerce",
      "ai_trigger": true,
      "instructions": "This item has high intent but decision friction. Trigger an Urgency Directive. Deploy 'Limited Stock' badges for this product_name to drive conversion.",
      "properties": {
        "product_id": {
          "type": "string",
          "required": true
        },
        "product_name": {
          "type": "string",
          "required": true
        },
        "product_category": {
          "type": "string",
          "required": true
        },
        "price": {
          "type": "number",
          "required": true
        },
        "instructions": {
          "type": "string",
          "required": false
        }
      }
    },
    "PRODUCT_PURCHASED": {
      "description": "User completed purchase - triggers social proof & cross-sell",
      "category": "ecommerce",
      "ai_trigger": true,
      "instructions": "Successful conversion. Deploy a 'Frequently Purchased' badge for this product_name to drive repeat purchases.",
      "properties": {
        "product_id": {
          "type": "string",
          "required": true
        },
        "product_name": {
          "type": "string",
          "required": true
        },
        "product_category": {
          "type": "string",
          "required": true
        },
        "price": {
          "type": "number",
          "required": true
        },
        "revenue": {
          "type": "number",
          "required": false,
          "description": "Total purchase revenue"
        },
        "quantity": {
          "type": "integer",
          "required": false,
          "description": "Quantity purchased"
        }
      }
    },
    "PRODUCT_ADDED_TO_CART": {
      "description": "User added product to shopping cart",
      "category": "ecommerce",
      "properties": {
        "product_id": {
          "type": "string",
          "required": true
        },
        "product_name": {
          "type": "string",
          "required": true
        },
        "price": {
          "type": "number",
          "required": true
        },
        "quantity": {
          "type": "integer",
          "required": true
        }
      }
    },
    "PRODUCT_DETECTED": {
      "description": "Product detected by camera/sensor system",
      "category": "detection",
      "source": "backend",
      "properties": {
        "product_id": {
          "type": "string",
          "required": true
        },
        "product_name": {
          "type": "string",
          "required": false
        },
        "confidence": {
          "type": "number",
          "required": true,
          "description": "Detection confidence score (0-1)"
        },
        "detection_time_ms": {
          "type": "integer",
          "required": true,
          "description": "Time taken for detection in milliseconds"
        },
        "camera_id": {
          "type": "string",
          "required": true,
          "description": "Camera/sensor identifier"
        },
        "bbox": {
          "type": "object",
          "required": false,
          "description": "Bounding box coordinates {x, y, w, h}"
        },
        "center": {
          "type": "object",
          "required": false,
          "description": "Center point coordinates {cx, cy}"
        }
      }
    },
    "MODEL_INFERENCE": {
      "description": "ML model inference completed",
      "category": "detection",
      "source": "backend",
      "properties": {
        "model_name": {
          "type": "string",
          "required": true,
          "description": "Model identifier (e.g., grounding-dino-tiny)"
        },
        "classes_detected": {
          "type": "array",
          "required": true,
          "description": "List of detected class names"
        },
        "num_detections": {
          "type": "integer",
          "required": true,
          "description": "Number of objects detected"
        },
        "inference_time_ms": {
          "type": "integer",
          "required": true,
          "description": "Inference time in milliseconds"
        },
        "confidence_threshold": {
          "type": "number",
          "required": false,
          "description": "Confidence threshold used"
        }
      }
    },
    "DASHBOARD_VIEWED": {
      "description": "User viewed a dashboard page",
      "category": "dashboard",
      "properties": {
        "dashboard_name": {
          "type": "string",
          "required": true
        },
        "time_spent_ms": {
          "type": "integer",
          "required": false
        }
      }
    },
    "CHART_INTERACTED": {
      "description": "User interacted with a chart",
      "category": "dashboard",
      "properties": {
        "chart_id": {
          "type": "string",
          "required": true
        },
        "interaction_type": {
          "type": "string",
          "required": true,
          "enum": ["hover", "click", "zoom", "pan", "filter"]
        },
        "chart_type": {
          "type": "string",
          "required": false,
          "enum": ["line", "bar", "pie", "scatter", "area"]
        }
      }
    },
    "FILTER_APPLIED": {
      "description": "User applied filters to data",
      "category": "dashboard",
      "properties": {
        "filters": {
          "type": "object",
          "required": true,
          "description": "Filter values applied"
        },
        "filter_count": {
          "type": "integer",
          "required": true
        }
      }
    },
    "EXPORT_TRIGGERED": {
      "description": "User exported data",
      "category": "dashboard",
      "properties": {
        "export_type": {
          "type": "string",
          "required": true,
          "enum": ["csv", "excel", "pdf", "json"]
        },
        "data_type": {
          "type": "string",
          "required": true
        },
        "record_count": {
          "type": "integer",
          "required": false
        }
      }
    },
    "AGENT_QUERY_SENT": {
      "description": "User sent query to AI agent",
      "category": "agent",
      "properties": {
        "query_text": {
          "type": "string",
          "required": true
        },
        "query_type": {
          "type": "string",
          "required": false
        },
        "context": {
          "type": "object",
          "required": false
        }
      }
    },
    "AGENT_RESPONSE_RECEIVED": {
      "description": "AI agent returned response",
      "category": "agent",
      "properties": {
        "query_id": {
          "type": "string",
          "required": true
        },
        "response_text": {
          "type": "string",
          "required": true
        },
        "response_time_ms": {
          "type": "integer",
          "required": true
        },
        "success": {
          "type": "boolean",
          "required": true
        }
      }
    },
    "AGENT_ACTION_EXECUTED": {
      "description": "AI agent executed an action",
      "category": "agent",
      "properties": {
        "action_type": {
          "type": "string",
          "required": true
        },
        "action_target": {
          "type": "string",
          "required": true
        },
        "action_params": {
          "type": "object",
          "required": false
        },
        "success": {
          "type": "boolean",
          "required": true
        }
      }
    },
    "EXPERIMENT_VIEWED": {
      "description": "User viewed an experiment variant",
      "category": "experiment",
      "properties": {
        "experiment_name": {
          "type": "string",
          "required": true
        },
        "variant": {
          "type": "string",
          "required": true
        }
      }
    },
    "EXPERIMENT_CONVERTED": {
      "description": "User converted in an experiment",
      "category": "experiment",
      "properties": {
        "experiment_name": {
          "type": "string",
          "required": true
        },
        "variant": {
          "type": "string",
          "required": true
        },
        "conversion_value": {
          "type": "number",
          "required": false
        }
      }
    }
  },
  "categories": {
    "ecommerce": "Product and shopping events",
    "detection": "Camera/sensor detection events",
    "dashboard": "Analytics dashboard interaction events",
    "agent": "AI agent interaction events",
    "experiment": "A/B testing and feature flag events"
  }
}
